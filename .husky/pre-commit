#!/bin/sh

# nvmã‚’èª­ã¿è¾¼ã‚€
if [ -f "$HOME/.nvm/nvm.sh" ]; then
  . "$HOME/.nvm/nvm.sh"
  nvm use 2>/dev/null || nvm use default 2>/dev/null || true
fi

# ã¾ãŸã¯ã€nvmã®ãƒ‘ã‚¹ã‚’ç›´æ¥è¿½åŠ 
export PATH="$HOME/.nvm/versions/node/v24.12.0/bin:$PATH"

echo "ğŸ” Running pre-commit checks..."

# TypeScriptãƒã‚§ãƒƒã‚¯
if [ -f tsconfig.json ]; then
  echo "Running TypeScript type checking..."
  npx tsc --noEmit || {
    echo "TypeScript check failed"
    exit 1
  }
fi

# ESLintãƒã‚§ãƒƒã‚¯ï¼ˆè¨­å®šãŒã‚ã‚Œã°ï¼‰
if [ -f .eslintrc.js ] || [ -f .eslintrc.json ] || [ -f .eslintrc.cjs ]; then
  echo "Running ESLint..."
  npx eslint . --ext .js,.jsx,.ts,.tsx --fix --quiet || {
    echo "ESLint check failed"
    exit 1
  }
fi

echo "âœ… All pre-commit checks passed!"
